<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IEP 1.0</title>

     <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/jquery-3.2.1.min.js" ></script>

       <style type="text/css">
        @font-face {  font-family: 'aBold';src: url('fonts/Avance/Avance Bold.ttf'); }
        @font-face {  font-family: 'aRegular';src: url('fonts/Avance/Avance Regular.ttf'); }
        @font-face {  font-family: 'aItalic';src: url('fonts/Avance/Avance Regular Italic.otf'); }
        </style>
	  <script type="text/javascript" src="cordova.js"></script>
	</head>

    <body style="overflow-x:hidden;background-color: rgba(232,233,234,0.7);">

       <div id="contentStep" style="display: none;position:absolute;left:0px;top:0px;height:100%;width:100%;">

                    <div id="header" style="position:relative;left:0px;top:0px;width:100%;padding-bottom:15px;padding-top:5px;">
                       <table width="100%" style="margin-top:25px;">
                            <tbody><tr>
                               <td width="10%" align="left" valign="center"></td>
                                    <td width="55%" align="left" valign="center">
                    <label style="color:#6B5A5F;font-size:25px;font-family:aBold;line-height:0.9;">Easy ScreenShots <br> <span style="color:#95A3CF;font-size:23px;font-family:aBold;">Websites</span></label>

                                </td>
                                    <td width="20%" align="right" valign="bottom">
                                        <img src="icon.png" width="60" onclick="onBackKeyDown();">
                                    </td>
                                    <td width="10%" align="left" valign="center"></td>
                            </tr>

                        </tbody></table>


                    </div>
                    <div style="display:none;position:relative;left:0px;top:0px;height:auto;width:100%;" align="center" id="thirdStep" align="center">
                      <table width="90%" height="">
                              <tr>
                                <td colspan="2" align="center">

                                  	<label style="color:#95A3CF;font-size:28px;font-family:aBold;line-height:0.8">
                                      Awesome!
                                      <br><span style="color:#6B5A5F;font-size:23px;font-family:aItalic;">Your picture has been captured successfully</span>
                                    </label>
                                    <br>
                                </td>
                              </tr>
                              <tr>
                                <td colspan="">
                                  <div style="margin-top:15px;background-color: #95A3CF; width: 100%;height: 40px;padding:5px;cursor: pointer;" class="shadowButton" onclick="saveScreenshot();">
                                       <table width="100%" height="100%">
                                           <tr>
                                                <td valign="center" align="center">
                                                    <label style="color:white;font-size:20px;font-family:aBold;line-height:0.9;cursor: pointer;">Save in Device
                                       </label>
                                                </td>
                                           </tr>
                                       </table>

                                  </div>
                                </td>
                                <td colspan="">
                                  <div style="margin-top:15px;background-color: #95A3CF; width: 100%;height: 40px;padding:5px;cursor: pointer;" class="shadowButton" onclick="shareScreenshot();">
                                       <table width="100%" height="100%">
                                           <tr>
                                                <td valign="center" align="center">
                                                    <label style="color:white;font-size:20px;font-family:aBold;line-height:0.9;cursor: pointer;">Share With
                                       </label>
                                                </td>
                                           </tr>
                                       </table>

                                  </div>
                                </td>
                              </tr>

                              <tr>
                                <td colspan="2">
                                  <div style="margin-top:10px;background-color: #95A3CF; width: 100%;height: 40px;padding:5px;cursor: pointer;" class="shadowButton" onclick="saveScreenshot();">
                                       <table width="100%" height="100%">
                                           <tr>
                                                <td valign="center" align="center" >
                                                    <label style="color:white;font-size:20px;font-family:aBold;line-height:0.9;cursor: pointer;">Try Again
                                       </label>
                                                </td>
                                           </tr>
                                       </table>

                                  </div>
                                </td>

                              </tr>

                              <tr>
                                <td colspan="2" align="center">
                                  <br>
                                  <img src="https://iep.life/images/websites/1img1535545391.png" id="responseImage" width="100%">
                                  <br>
                                </td>
                              </tr>
                      </table>
                    </div>
                    <div style="display:none;position:absolute;left:0px;top:20%;height:80%;width:100%;" align="center" id="fetching">

                      <table width="100%" height="100%">
                  				<tr>
                  						<td valign="center" align="center">

                                              <br><br>
                  								<img src="icon.png" >
                  								<br><br>
                  								<label style="color:#6B5A5F;font-size:23px;font-family:aItalic;">Fetching Image...</label>
                  							</td>
                  				</tr>
                  		</table>

                    </div>
                    <div style="display:none;position:absolute;left:0px;top:20%;height:80%;width:100%;" align="center" id="secondStep">

                      <table width="80%" height="100%">
                          <tr>
                                  <td valign="center" align="center">
                                      <div align="center"><label style="color:#6B5A5F;font-size:25px;font-family:aBold;line-height:0.9;"> Â¿Are you sure take a screenshot this site?</label>
<br> <span style="color:#95A3CF;font-size:23px;font-family:aBold;" id="nameWebsite">www.google.com</span>
                                      </div>

                                    <div style="margin-top:15px;background-color: #95A3CF; width: 300px;height: 40px;padding:5px;cursor: pointer;" class="shadowButton" onclick="step(2);">
                                         <table width="100%" height="100%">
                                             <tr>
                                                  <td valign="center" align="center">
                                                      <label style="color:white;font-size:30px;font-family:aBold;line-height:0.9;cursor: pointer;">Take Screenshot
                                         </label>
                                                  </td>
                                             </tr>
                                         </table>

                                    </div>

                                    <div style="margin-top:15px;background-color: #95A3CF; width: 300px;height: 40px;padding:5px;cursor: pointer;" class="shadowButton" onclick="step(3);">
                                         <table width="100%" height="100%">
                                             <tr>
                                                  <td valign="center" align="center">
                                                      <label style="color:white;font-size:30px;font-family:aBold;line-height:0.9;cursor: pointer;">More Settings
                                         </label>
                                                  </td>
                                             </tr>
                                         </table>

                                    </div>
                                  </td>
                          </tr>

                      </table>

                    </div>
                    <div style="display:none;position:absolute;left:0px;top:20%;height:80%;width:100%;" align="center" id="firstStep">
                        <table width="80%" height="80%">
                            <tr>
                                    <td valign="center" align="center">
                                        <div align="left"><label style="color:#6B5A5F;font-size:20px;font-family:aRegular;line-height:0.9;cursor: pointer;"> Please write the name of website</label></div>
                                      <input id="domain" type="url" name="url" class="form-control" style="font-family:aRegular;text-align: center; height: 60px;font-size: 28px;text-transform: lowercase;" placeholder="www.mywebsite.com" >
                                      <div style="margin-top:15px;background-color: #95A3CF; width: 200px;height: 40px;padding:5px;cursor: pointer;margin-bottom:50px;" class="shadowButton" onclick="step(1);">
                                           <table width="100%" height="100%">
                                               <tr>
                                                    <td valign="center" align="center">
                                                        <label style="color:white;font-size:30px;font-family:aBold;line-height:0.9;cursor: pointer;">Next
                                           </label>
                                                    </td>
                                               </tr>
                                           </table>

                                      </div>
                                    </td>
                            </tr>

                        </table>
                    </div>

       </div>
    	<div style="position:absolute;left:0px;top:0px;height:100%;width:100%;" id="loadingPage">
    		<table width="100%" height="100%">
    				<tr>
    						<td valign="center" align="center">
                                <label Style="color:#6B5A5F;font-size:28px;font-family:aBold;line-height:0.8;">Easy ScreenShots</label>
                                <br>
                                <label Style="color:#95A3CF;font-size:33px;font-family:aBold;line-height:0.8;">Websites</label>
                                <br>
                                <label Style="color:#95A3CF;font-size:23px;font-family:aItalic;line-height:0.8;">Version 1.0</label>
                                <br><br>
    								<img src="icon.png" >
    								<br><br>
    								<label Style="color:#6B5A5F;font-size:23px;font-family:aItalic;">Loading..</label>
    							</td>
    				</tr>
    		</table>
    	</div>

    <script>

    document.addEventListener("backbutton", onBackKeyDown, false);
    var cancelScreen=false;
    function saveScreenshot(){
      alert("save");
    }

    function shareScreenshot(){
      alert("share");
    }
    function onBackKeyDown() {
      $("#firstStep").css("display","none");
      $("#secondStep").css("display","none");
      if($("#fetching").css("display") !='none'){
        if(confirm("Â¿Are you sure cancel this screenshot?")){
          step(0);
          cancelScreen=false;
        }
      }
      $("#fetching").css("display","none");
      $("#thirdStep").css("display","none");



      if(currentStep==0 || currentStep==1) {step(0); return;}
      if(currentStep==3) {step(1); return;}
      if(currentStep==2) {step(0); }
    }
    function validURL(str) {
  var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
    '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
    '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
    '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
  return !!pattern.test(str);
}
var currentNameWebsite;
var currentStep=0;
    function step(id){
      currentStep=id;
       if(id==0){
         $("#firstStep").fadeIn();
       }
        if(id==1){

            var protocol; var domainOutProtocol;
            domain=$("#domain").val();
            searchProtocol=domain.indexOf("://");
            (searchProtocol != -1 )? domainOutProtocol=domain.substring( searchProtocol+3 ) : domainOutProtocol=domain;
            (searchProtocol != -1 )? protocol=domain.substring(0,searchProtocol+3 ) : protocol="http://";
            splitDomain=domainOutProtocol.split("/");
            theDomain=splitDomain[0];

            currentNameWebsite=protocol+domainOutProtocol;


            //alert(protocol + "<>" +domainOutProtocol);
            if(validURL(theDomain)!=false){
                $("#firstStep").fadeOut();
                $("#secondStep").fadeIn();
                $("#nameWebsite").html(currentNameWebsite);

            }else{
                alert("Please write a correct name of website");
            }
        }
        if(id==2){
          $("#firstStep").fadeOut();
          $("#secondStep").fadeOut();
          $("#fetching").fadeIn();
          if(!cancelScreen)    {
            $.post("https://internetespoder.com/apps/easyscreenshotswebsite/cdn/core.php",{site:currentNameWebsite}).done(function(data){
              $("#responseImage").attr("src",data);
              setTimeout(function(){  step(3);},2000);
            });

              cancelScreen=false;
          }

        }
        if(id==3){
          $("#firstStep").fadeOut();
          $("#secondStep").fadeOut();
          $("#fetching").fadeOut();
          $("#thirdStep").fadeIn();
        }
    }
            setTimeout(function(){
                $("#loadingPage").fadeOut();
                $("#contentStep").fadeIn();
                step(0);
            },1000);
    </script>
    <script type="text/javascript">
        app.initialize();
    </script>

  </body>
</html>
